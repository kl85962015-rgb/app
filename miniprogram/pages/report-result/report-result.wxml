<!--pages/report-result/report-result.wxml-->
<view class="page-container">
  
  <!-- æŠ¥å‘Šå¤´éƒ¨ -->
  <view class="report-header">
    <view class="report-status {{report.hazards.length === 0 ? 'safe' : 'warning'}}">
      <text class="status-icon">{{report.hazards.length === 0 ? 'ğŸ›¡ï¸' : 'âš ï¸'}}</text>
      <text class="status-msg">{{report.hazards.length === 0 ? 'æ£€æŸ¥åˆæ ¼' : 'å‘ç°éšæ‚£'}}</text>
    </view>
    <view class="report-title">{{report.enterpriseName}}</view>
    <view class="report-meta">
      <text>{{report.createTime}} ç”Ÿæˆ</text>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ‘˜è¦ -->
  <view class="summary-section">
    <view class="light-card summary-card">
      <view class="sum-item">
        <text class="sum-val">{{report.hazards.length}}</text>
        <text class="sum-key">éšæ‚£æ€»æ•°</text>
      </view>
      <view class="vert-div"></view>
      <view class="sum-item">
        <text class="sum-val is-major">{{majorCount}}</text>
        <text class="sum-key">é‡å¤§éšæ‚£</text>
      </view>
    </view>
  </view>

  <!-- éšæ‚£æ¸…å• -->
  <view class="list-section">
    <view class="sec-label">è¯¦ç»†æ¸…å• / DETAILED LIST</view>
    <block wx:for="{{report.hazards}}" wx:key="index">
      <view class="light-card list-row-card">
        <image src="{{item.photos[0]}}" mode="aspectFill" class="row-thumb"></image>
        <view class="row-content">
          <view class="row-top">
            <text class="row-loc">{{item.location || 'ä½ç½®æœªè®°å½•'}}</text>
            <text class="lvl-tag {{item.level}}">{{item.level === 'major' ? 'é‡å¤§' : 'ä¸€èˆ¬'}}</text>
          </view>
          <text class="row-desc">{{item.description}}</text>
        </view>
      </view>
    </block>
  </view>

  <!-- åº•éƒ¨å¯¼å‡º -->
  <view class="footer-bar">
    <view class="export-btn" bindtap="exportReport">
      <text>ğŸ“¤ å¯¼å‡º/ä¿å­˜æŠ¥å‘Šå›¾ç‰‡</text>
    </view>
  </view>

</view>
