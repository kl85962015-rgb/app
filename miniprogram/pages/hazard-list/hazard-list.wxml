<!--pages/hazard-list/hazard-list.wxml-->
<view class="page-container">
  
  <!-- é¡¶éƒ¨ç­›é€‰ Tab -->
  <view class="filter-tabs">
    <view class="tab-pill {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-status="all">å…¨éƒ¨</view>
    <view class="tab-pill {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="setFilter" data-status="pending">å¾…æ•´æ”¹</view>
    <view class="tab-pill {{currentFilter === 'rectified' ? 'active' : ''}}" bindtap="setFilter" data-status="rectified">å¾…éªŒæ”¶</view>
    <view class="tab-pill {{currentFilter === 'completed' ? 'active' : ''}}" bindtap="setFilter" data-status="completed">å·²é—­ç¯</view>
  </view>

  <!-- éšæ‚£åˆ—è¡¨ -->
  <view class="hazard-list">
    <block wx:if="{{filteredHazards.length > 0}}">
      <view class="hazard-card" wx:for="{{filteredHazards}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <view class="card-status-stripe {{item.status}}"></view>
        <view class="card-body">
          <image class="thumb-img" src="{{item.photos[0]}}" mode="aspectFill"></image>
          <view class="card-content">
            <text class="hazard-ent">{{item.enterpriseName}}</text>
            <text class="hazard-desc">{{item.description}}</text>
            <view class="tags-row">
              <text class="tag-mini {{item.level === 'major' ? 'tag-level' : 'tag-level-gen'}}">{{item.level === 'major' ? 'é‡å¤§' : 'ä¸€èˆ¬'}}</text>
              <text class="tag-mini tag-status {{item.status}}">{{statusMap[item.status]}}</text>
            </view>
          </view>
        </view>
        <view class="card-footer">
          <text class="time-txt">{{item.createTimeFormatted}}</text>
          <view class="detail-link">æŸ¥çœ‹è¯¦æƒ… â€º</view>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-tip" wx:else style="text-align: center; padding-top: 100rpx; color: #94A3B8;">
      <text style="display: block; font-size: 60rpx; margin-bottom: 20rpx;">ğŸƒ</text>
      <text>æš‚æ— ç›¸å…³éšæ‚£è®°å½•</text>
    </view>
  </view>

</view>
